<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche de Personnage - The Witcher</title>
    <script src="../datas/grimoire.js"></script>
    <link href="../styles/styles.css" rel="stylesheet">
    
</head>
<body>
    
    <nav>
        <button><a href="../character.html">Fiche</a></button>
        <button><a href="#">Grimoire</a></button>
        <button><a href="#">Aide/Rappels</a></button>
        <button><a href="#">Notes/Background</a></button>
        <button><a href="./inventory.html">Inventaire/Composants</a></button>
        <select id="selectLevel">
            <option value="">Niveau...</option>
            <option value="Novice">Novice</option>
            <option value="Compagnon">Compagnon</option>
            <option value="Maitre">Maitre</option>
        </select>
        <select id="selectType">
            <option value="">Type...</option>
            <option value="Sorts">Sorts</option>
            <option value="Rituels">Rituels</option>
        </select>
    </nav>
    
    <div class="infos-container container" style="width: 90%; margin-top: 0;">
        <h1>Fiche Personnage - Grimoire</h1>
        <h4 id="infosLevel"></h4>
        <table id="grimoireTable">
            <tr>
                <th>Nom</th>
                <th>Temps_preparation</th>
                <th>Type</th>
                <th>Cout</th>
                <th>Duree</th>
                <th>Effet</th>
                <th>SD_Difficulte</th>
                <th>Defense</th>
                <th>Degats</th>
                <th>Classe</th>
                <th>Source</th>  
            </tr>       
        </table>
    </div>

</body>
<script type="text/javascript" defer>
    let infosLevel = document.getElementById("infosLevel");
    let grimoireTable = document.getElementById("grimoireTable");
    let selectLevel = document.getElementById("selectLevel");
    let selectType = document.getElementById("selectType");
    const baseTableHTML = `<tr>
                <th>Nom</th>
                <th>Temps_preparation</th>
                <th>Type</th>
                <th>Cout</th>
                <th>Duree</th>
                <th>Effet</th>
                <th>SD_Difficulte</th>
                <th>Defense</th>
                <th>Degats</th>
                <th>Classe</th>
                <th>Source</th>  
            </tr>`
    selectLevel.addEventListener("change", e => {
        infosLevel.innerHTML= "";
        infosLevel.innerHTML = "PP: "+grimoire[selectLevel.value]["PP"]+" DurÃ©e: "+grimoire[selectLevel.value]["Duree"]+" SD: "+grimoire[selectLevel.value]["SD"]+" Jets: "+grimoire[selectLevel.value]["PP"];
        grimoireTable.innerHTML = baseTableHTML;
        grimoire[selectLevel.value][selectType.value].forEach(obj => {
        let row = document.createElement("tr");
        for(const prop in obj){
            let cell = document.createElement("td");
            cell.innerHTML = obj[prop];
            row.appendChild(cell);
        }
        grimoireTable.appendChild(row);
    });
    })
    selectType.addEventListener("change", e => {
        grimoireTable.innerHTML = baseTableHTML;
        grimoire[selectLevel.value][selectType.value].forEach(obj => {
        let row = document.createElement("tr");
        for(const prop in obj){
            let cell = document.createElement("td");
            cell.innerHTML = obj[prop];
            row.appendChild(cell);
        }
        grimoireTable.appendChild(row);
    });
    })
    

</script>
</html>